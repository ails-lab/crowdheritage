<template>
  <div id="newUserGroupSidebar" class="sidebar">
    <div class="action-header">
      <div class="title">${(edit ? 'Update ' : 'New ') + 'User Group'}</div>
    </div>
    <a href="javascript:void(0)" class="closebtn" click.delegate="closeNav()">Ã—</a>
    <div class="action-body">
      <div class="form-group">
        <label>Name</label>
        <input type="text" placeholder="Name your group" value.bind="name" autofocus>
      </div>
      <div class="form-group">
        <label>Short Name</label>
        <input type="text" placeholder="Give a short, unique name" value.bind="shortName" autofocus>
      </div>
      <div class="form-group">
        <label>Description</label>
        <textarea rows="2" type="text" placeholder="Describe your group" value.bind="about"></textarea>
      </div>
      <button class="btn-green" click.delegate="closeNavAfterSave(name, shortName, about)">Save User Group</button>
      
      <div class="action-header mt">
        <div class="title">Manage Users</div>
      </div>
      <div class="form-group mt-small" if.bind="group !== null">        
        <div class="autocomplete-container">
          <input id="uinput" autocomplete="off" value.bind="prefix" input.delegate="prefixChanged($event.target.value)"
            type="text" placeholder="Start typing username" />
          <div id="usersuggestions" show.bind='suggestionsActive' class="autocomplete-suggestions">
            <div id="u${$index}" class="autocomplete-suggestion autocomplete-suggestion-extra"
              mouseover.delegate="domouseover('u'+$index)" mouseout.delegate="domouseout('u'+$index)"
              click.delegate="addMember($index,'user')" repeat.for="item of suggestedNames">
              ${item.value}
              <!-- <span class="label pull-right" style="color: black">${item.data.category}</span> -->
            </div>
          </div>
        </div>
        <table class="user-table">
          <tr>
            <th>Access</th>
            <th>Username</th>
            <th></th>
          </tr>
          <tr repeat.for="user of users">
            <td if.bind="user.admin">Editor</td>
            <td if.bind="!user.admin">Member</td>
            <td>${user.username}</td>
            <td><i if.bind="!user.admin" class="fa fa-trash red-trash"
                click.delegate="removeMember(user.username, user.userId, user.category)"></i></td>
          </tr>
        </table>
      </div>
    </div>

    <i show.bind="saving" class="fa fa-spinner fa-pulse"></i>
  </div>
</template>
