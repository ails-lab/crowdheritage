<template>
  <main>
    <h3>Campaign Editor</h3>
    <!-- campaign list-->

    <section class="collections">
      <div class="container">
        <!-- top section-->
        <div class="topsection">
          <!-- label-->
          <div class="sectionlabel">
            <div class="bold">${[campaignsCount, 'campaign'] | itemCounter}</div>
          </div>
          <div class="import-wrap">
            <a id="import" href="javascript:void(0)" data-toggle="dropdown" click.delegate="createCampaignSidebar()">
              <span class="text">Create Campaign</span>
            </a>
          </div>
        </div>
        <div class="campaignlist" if.bind="campaignsCount>0">
          <!-- entry-->
          <div class="entries row" ref="grid">
            <div class="entry col-md-4 ${camp.username}" repeat.for="camp of campaigns">
              <!-- <a route-href="route: campaign-edit; params.bind: { cname: camp.username, lang: loc }"> -->
              <a route-href="route: campaign-edit; params.bind: { cname: camp.username, lang: loc }">
                <div class="thumbs">
                  <img class="centered-and-cropped" src.bind="camp.banner"
                    onerror="this.src='/img/assets/img/ui/ic-noimage.png'">
                  <div class="action">
                    <h3><b>Edit </b></h3>
                  </div>
                </div>
                <!-- detail-->
                <div class="detail">
                  <!-- title-->
                  <div class="desc" style="width: 100%;">
                    <h4 class="title overflow-ellipsis">${camp.title}</h4>
                    <div class="owner"><span t="summary:Created on">Created on</span> ${camp.startDate | dateFormat}
                    </div>
                  </div>
                </div>
              </a>
            </div>
          </div>
          <!-- more-->
          <!-- <div class="loadmore">
            <a href="#" show.bind="!loading && more" click.delegate="loadMore()" t="app:loadmore">LOAD MORE</a>
            <div class="more"><i show.bind="loading" class="fa fa-spinner fa-pulse"></i></div>
          </div> -->

        </div>
        <div if.bind="campaignsCount===0">
          <h5>You have created no campaigns.</h5>
        </div>
      </div>
    </section>
    <section>
      <compose view-model="widgets/import-items/import-items"
        model.bind="{'importMethod': importMethod, 'router': router, 'lang': loc}">
      </compose>
    </section>
  </main>

  <!-- Create Campaign Sidebar -->
  <div id="campaignSidebar" class="sidebar">
    <div>
      <div class="action-header">
        <div class="title" t="dashboard:createCampaign">Create Campaign</div>
      </div>
      <a href="javascript:void(0)" class="closebtn" click.delegate="closeNav()">Ã—</a>
      <div class="action-body">
        <div class="form-group">
          <label t="dashboard:usernameLabel">Campaign Username (must be unique)</label>
          <input type="text" placeholder="e.g. endangered-species" value.bind="campaignUsername">
        </div>
      </div>
      <div class="button-group">
        <button class="btn-green" click.delegate="createCampaign()" t="dashboard:createCampaign">Create
          Campaign</button>
      </div>
    </div>
  </div>

</template>
